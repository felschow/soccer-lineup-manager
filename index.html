<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#0f172a">
    <title>Soccer Lineup Manager</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>‚öΩ Soccer Lineup Manager</h1>
            
            <div class="period-nav">
                <button onclick="previousPeriod()" id="prevBtn">‚Äπ</button>
                <span class="current-period" id="currentPeriodText">Period 1</span>
                <button onclick="nextPeriod()" id="nextBtn">‚Ä∫</button>
            </div>
            
            <div class="quick-actions">
                <button class="btn" onclick="toggleView()" id="viewToggle">üìä Table View</button>
                <button class="btn" onclick="autoFillAll()">Auto Fill All</button>
                <button class="btn btn-secondary" onclick="clearPeriod()">Clear</button>
                <button class="btn btn-secondary" onclick="exportLineup()">Export</button>
            </div>
        </div>

        <!-- Mobile Period Navigation -->
        <div class="mobile-period-nav">
            <div class="mobile-period-slider">
                <button class="mobile-period-button" onclick="previousPeriod()">‚Äπ</button>
                <div class="mobile-period-display">
                    <div class="mobile-period-title" id="mobilePeriodTitle">Period 1</div>
                    <div class="mobile-period-time" id="mobilePeriodTime">0:00 - 7:30</div>
                </div>
                <button class="mobile-period-button" onclick="nextPeriod()">‚Ä∫</button>
            </div>
        </div>

        <!-- Mobile Quick Actions -->
        <div class="mobile-quick-actions">
            <button class="mobile-action-button primary" onclick="autoFillAll()">
                <span class="icon">‚öΩ</span>
                Auto Fill All
            </button>
            <button class="mobile-action-button" onclick="clearPeriod()">
                <span class="icon">üóëÔ∏è</span>
                Clear Period
            </button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="player-pool">
                    <div class="pool-title">
                        üë• Available Players
                    </div>
                    <div class="player-list" id="playerList">
                        <!-- Players will be populated here -->
                    </div>
                </div>

                <div class="stats-summary">
                    <div class="pool-title">üìä Quick Stats</div>
                    <div id="quickStats">
                        <!-- Stats will be shown here -->
                    </div>
                </div>
            </div>

            <div class="field-container" id="fieldView">
                <div class="period-info">
                    <div class="period-title" id="periodTitle">Period 1</div>
                    <div class="period-time" id="periodTime">0:00 - 7:30</div>
                </div>

                <div class="soccer-field">
                    <div class="field-lines">
                        <div class="penalty-area-top"></div>
                        <div class="penalty-area-bottom"></div>
                        <div class="goal-area-top"></div>
                        <div class="goal-area-bottom"></div>
                        <div class="corner-arc top-left"></div>
                        <div class="corner-arc top-right"></div>
                        <div class="corner-arc bottom-left"></div>
                        <div class="corner-arc bottom-right"></div>
                    </div>
                    
                    <div class="position-slot striker" data-position="striker">
                        <div class="position-label">ST</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot left-wing" data-position="left-wing">
                        <div class="position-label">LW</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot right-wing" data-position="right-wing">
                        <div class="position-label">RW</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot center-mid-left" data-position="center-mid-left">
                        <div class="position-label">CM</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot center-mid-right" data-position="center-mid-right">
                        <div class="position-label">CM</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot left-back" data-position="left-back">
                        <div class="position-label">LB</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot center-back" data-position="center-back">
                        <div class="position-label">CB</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot right-back" data-position="right-back">
                        <div class="position-label">RB</div>
                        <div class="player-name"></div>
                    </div>
                    
                    <div class="position-slot goalkeeper" data-position="goalkeeper">
                        <div class="position-label">GK</div>
                        <div class="player-name"></div>
                    </div>
                </div>

                <div class="bench-area" id="benchArea">
                    <div class="bench-title">ü™ë Sitting Out This Period</div>
                    <div class="empty-message" id="benchEmpty">Drop players here to sit them out</div>
                </div>

                <div class="bench-area" id="jerseyArea" style="border-color: #8B5CF6; background: #F3E8FF;">
                    <div class="bench-title" style="color: #8B5CF6;">üëï Preparing Jersey (Next GK)</div>
                    <div class="empty-message" id="jerseyEmpty" style="color: #8B5CF6;">Drop players here for goalkeeper preparation</div>
                </div>
            </div>

            <!-- NEW: Mobile-Optimized Field View -->
            <div class="mobile-field-container" id="mobileFieldView">
                <div class="mobile-position-card" data-position="goalkeeper">
                    <div class="position-label">Goalkeeper (GK)</div>
                    <div class="player-name" id="mobile-goalkeeper">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="left-back">
                    <div class="position-label">Left Back (LB)</div>
                    <div class="player-name" id="mobile-left-back">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="center-back">
                    <div class="position-label">Center Back (CB)</div>
                    <div class="player-name" id="mobile-center-back">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="right-back">
                    <div class="position-label">Right Back (RB)</div>
                    <div class="player-name" id="mobile-right-back">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="center-mid-left">
                    <div class="position-label">Center Mid Left (CM)</div>
                    <div class="player-name" id="mobile-center-mid-left">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="center-mid-right">
                    <div class="position-label">Center Mid Right (CM)</div>
                    <div class="player-name" id="mobile-center-mid-right">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="left-wing">
                    <div class="position-label">Left Wing (LW)</div>
                    <div class="player-name" id="mobile-left-wing">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="striker">
                    <div class="position-label">Striker (ST)</div>
                    <div class="player-name" id="mobile-striker">Tap to assign</div>
                </div>

                <div class="mobile-position-card" data-position="right-wing">
                    <div class="position-label">Right Wing (RW)</div>
                    <div class="player-name" id="mobile-right-wing">Tap to assign</div>
                </div>

                <!-- Bench Section -->
                <div style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px; color: #374151;">Bench Players</h3>
                    <div class="mobile-position-card" data-position="bench-1">
                        <div class="position-label">Bench #1</div>
                        <div class="player-name" id="mobile-bench-1">Tap to assign</div>
                    </div>
                    <div class="mobile-position-card" data-position="bench-2">
                        <div class="position-label">Bench #2</div>
                        <div class="player-name" id="mobile-bench-2">Tap to assign</div>
                    </div>
                    <div class="mobile-position-card" data-position="bench-3">
                        <div class="position-label">Bench #3</div>
                        <div class="player-name" id="mobile-bench-3">Tap to assign</div>
                    </div>
                </div>

                <!-- Jersey Prep Section -->
                <div style="margin-top: 24px;">
                    <h3 style="margin-bottom: 16px; color: #374151;">Jersey Preparation</h3>
                    <div class="mobile-position-card" data-position="jersey-1">
                        <div class="position-label">Jersey Prep</div>
                        <div class="player-name" id="mobile-jersey-1">Tap to assign</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="table-view" id="tableView">
            <div class="table-controls">
                <div class="table-title">üìä Complete Game Overview</div>
                <div>
                    <button class="btn btn-secondary" onclick="clearAllPeriods()">Clear All</button>
                    <button class="btn" onclick="autoFillAll()">Auto Fill All</button>
                </div>
            </div>
            
            <table class="lineup-table" id="lineupTable">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th class="period-header">Period 1<br><small>0:00-7:30</small></th>
                        <th class="period-header">Period 2<br><small>7:30-15:00</small></th>
                        <th class="period-header">Period 3<br><small>15:00-22:30</small></th>
                        <th class="period-header">Period 4<br><small>22:30-30:00</small></th>
                        <th class="period-header">Period 5<br><small>30:00-37:30</small></th>
                        <th class="period-header">Period 6<br><small>37:30-45:00</small></th>
                        <th class="period-header">Period 7<br><small>45:00-52:30</small></th>
                        <th class="period-header">Period 8<br><small>52:30-60:00</small></th>
                        <th>Summary Stats</th>
                    </tr>
                </thead>
                <tbody id="lineupTableBody">
                    <!-- Table rows will be populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <div class="mobile-nav-grid">
            <button class="mobile-nav-button" onclick="autoFillAll()">
                <span class="icon">‚öΩ</span>
                <span>Auto Fill</span>
            </button>
            <button class="mobile-nav-button" onclick="toggleView()">
                <span class="icon">üìä</span>
                <span>Stats</span>
            </button>
            <button class="mobile-nav-button" onclick="clearPeriod()">
                <span class="icon">üóëÔ∏è</span>
                <span>Clear</span>
            </button>
            <button class="mobile-nav-button" onclick="exportLineup()">
                <span class="icon">üì§</span>
                <span>Export</span>
            </button>
        </div>
    </nav>

    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Application Modules -->
    <script src="js/config.js"></script>
    <script src="js/toastManager.js"></script>
    <script src="js/lineupManager.js"></script>
    <script src="js/historyManager.js"></script>
    <script src="js/enhancedStats.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/dragDrop.js"></script>
    <script src="js/mobileEnhancements.js"></script>
    <script src="js/mobileUIManager.js"></script>
    <script src="js/autoFill.js"></script>
    <script src="js/exportUtils.js"></script>
    <script src="js/app.js"></script>
</body>
</html>